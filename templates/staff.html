<!doctype html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Στελέχη</title>
  <style>
    body { margin: 0; font-family: sans-serif; }
    .navbar {
      background: #234;
      color: #fff;
      padding: 0.5em 2em;
      display: flex;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .navbar a {
      color: #fff;
      text-decoration: none;
      margin-right: 2em;
      font-weight: bold;
      transition: color 0.2s;
    }
    .navbar a.active, .navbar a:hover { color: #fd0; }
    .form-section {
      max-width: 1000px;
      margin: 2em auto;
      background: #f4f4f8;
      padding: 1em 2em 2em 2em;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(30,40,60,0.07);
    }
    .form-row {
      margin-bottom: 1em;
      display: flex;
      gap: 1em;
      align-items: center;
    }
    label { min-width: 100px; font-weight: 500; }
    .staff-table-container {
      max-width: 1000px;
      margin: 2em auto;
      overflow-x: auto;
    }
    table.staff-table {
      width: 100%;
      border-collapse: collapse;
      background: #f7f7fa;
      border-radius: 12px;
      box-shadow: 0 1px 2px rgba(20,20,30,0.07);
      min-width: 600px;
    }
    .staff-table th, .staff-table td {
      padding: 1em 0.6em;
      text-align: left;
      vertical-align: middle;
      font-size: 1.07em;
    }
    .staff-table th {
      background: #234;
      color: #fff;
    }
    .actions {
      display: flex;
      gap: 0.5em;
    }
    .icon-btn {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.3em;
      display: inline-flex;
      align-items: center;
      transition: background 0.15s;
    }
    .icon-btn:hover {
      background: #eef;
      border-radius: 50%;
    }
    form.inline { display: inline; }
    .staff-link {
      color:#234;
      font-weight:bold;
      text-decoration:underline;
    }
    /* Responsive fix for overflow */
    @media (max-width: 700px) {
      .form-section, .staff-table-container {
        max-width: 98vw;
        padding-left: 2vw;
        padding-right: 2vw;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="{{ url_for('index') }}">Εκκρεμότητες</a>
    <a href="{{ url_for('duties') }}">Υπηρεσίες</a>
    <a href="{{ url_for('staff') }}" class="active">Στελέχη</a>
  </nav>
  <div class="form-section">
    <h2>Καταχώρηση νέου στελέχους</h2>
    <form action="{{ url_for('add_staff') }}" method="post">
      <div class="form-row">
        <label>Βαθμός:</label>
        <input name="rank">
        <label>Όνομα:</label>
        <input name="name" required>
      </div>
      <button type="submit">Προσθήκη</button>
    </form>
  </div>
  <h1 style="text-align:center;">Στελέχη</h1>
  <!-- Sort dropdown -->
  <form method="get" style="margin-bottom:1em; text-align:center;">
    <label for="order_by"><b>Ταξινόμηση κατά:</b></label>
    <select name="order_by" id="order_by" onchange="this.form.submit()" style="padding:0.3em 1em; border-radius:6px; border:1px solid #bcd; margin-right:1em;">
      <option value="name" {% if order_by == 'name' %}selected{% endif %}>Όνομα</option>
      <option value="rank" {% if order_by == 'rank' %}selected{% endif %}>Βαθμό</option>
    </select>
  </form>
  <div class="staff-table-container">
    <table class="staff-table">
      <thead>
        <tr>
          <th>Ενέργειες</th>
          <th>Βαθμός</th>
          <th>Όνομα</th>
        </tr>
      </thead>
      <tbody>
        {% for s in staff %}
        <tr>
          <td>
            <div class="actions">
              <a class="icon-btn" href="{{ url_for('edit_staff', staff_id=s.id) }}" title="Επεξεργασία">
                <!-- Pencil Icon -->
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M13.85 3.15a2.1 2.1 0 0 1 2.97 2.97l-8.49 8.49a2 2 0 0 1-.71.45l-3.34 1.11a.5.5 0 0 1-.63-.63l1.11-3.34a2 2 0 0 1 .45-.71l8.49-8.49zM15.56 6.06l-1.62-1.62" stroke="#345" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </a>
              <form class="inline" action="{{ url_for('delete_staff', staff_id=s.id) }}" method="post" onsubmit="return confirm('Διαγραφή στελέχους και όλων των υπηρεσιών του;');">
                <button class="icon-btn" type="submit" title="Διαγραφή">
                  <!-- Trash Icon -->
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 6.5v9A1.5 1.5 0 0 0 6.5 17h7a1.5 1.5 0 0 0 1.5-1.5v-9M8.5 9v4M11.5 9v4M3 6.5h14M8 6.5V5.5A1.5 1.5 0 0 1 9.5 4h1A1.5 1.5 0 0 1 12 5.5v1" stroke="#c24" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
              </form>
            </div>
          </td>
          <td>{{ s.rank }}</td>
          <td>
            <a href="{{ url_for('staff_duties', staff_id=s.id) }}" class="staff-link">
              {{ s.name }}
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
