<!doctype html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Στελέχη</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <nav class="navbar">
    <a href="{{ url_for('index') }}" class="navbar-link">Εκκρεμότητες</a>
    <a href="{{ url_for('duties') }}" class="navbar-link">Υπηρεσίες</a>
    <a href="{{ url_for('staff') }}" class="navbar-link is-active">Στελέχη</a>
  </nav>
  <div class="section-panel">
    <h2 class="section-heading">Καταχώρηση νέου στελέχους</h2>
    <form action="{{ url_for('add_staff') }}" method="post">
      <div class="form-row">
        <label class="form-label">Βαθμός:</label>
        <input name="rank" class="input-control">
        <label class="form-label">Όνομα:</label>
        <input name="name" required class="input-control">
      </div>
      <div class="form-actions">
        <button type="submit" class="button-primary">Προσθήκη</button>
      </div>
    </form>
  </div>
  <h1 class="section-heading">Στελέχη</h1>
  <form method="get" class="filter-form">
    <label for="order_by" class="label-strong">Ταξινόμηση κατά:</label>
    <select name="order_by" id="order_by" class="select-control" onchange="this.form.submit()">
      <option value="name" {% if order_by == 'name' %}selected{% endif %}>Όνομα</option>
      <option value="rank" {% if order_by == 'rank' %}selected{% endif %}>Βαθμό</option>
    </select>
  </form>
  <div class="table-panel">
    <div class="table-wrapper">
      <table class="data-table">
        <thead>
          <tr>
            <th>Ενέργειες</th>
            <th>Βαθμός</th>
            <th>Όνομα</th>
          </tr>
        </thead>
        <tbody>
          {% for s in staff %}
          <tr>
            <td>
              <div class="actions">
                <a class="icon-button" href="{{ url_for('edit_staff', staff_id=s.id) }}" title="Επεξεργασία">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M13.85 3.15a2.1 2.1 0 0 1 2.97 2.97l-8.49 8.49a2 2 0 0 1-.71.45l-3.34 1.11a.5.5 0 0 1-.63-.63l1.11-3.34a2 2 0 0 1 .45-.71l8.49-8.49zM15.56 6.06l-1.62-1.62" stroke="#345" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </a>
                <form class="inline-form" action="{{ url_for('delete_staff', staff_id=s.id) }}" method="post" onsubmit="return confirm('Διαγραφή στελέχους και όλων των υπηρεσιών του;');">
                  <button class="icon-button" type="submit" title="Διαγραφή">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 6.5v9A1.5 1.5 0 0 0 6.5 17h7a1.5 1.5 0 0 0 1.5-1.5v-9M8.5 9v4M11.5 9v4M3 6.5h14M8 6.5V5.5A1.5 1.5 0 0 1 9.5 4h1A1.5 1.5 0 0 1 12 5.5v1" stroke="#c24" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  </button>
                </form>
              </div>
            </td>
            <td>{{ s.rank }}</td>
            <td>
              <a href="{{ url_for('staff_duties', staff_id=s.id) }}" class="link-highlight">
                {{ s.name }}
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
